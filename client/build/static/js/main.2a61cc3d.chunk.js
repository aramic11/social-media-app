(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{196:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,268)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},r=n(0),c=n.n(r),o=n(24),i=n.n(o),s=n(156),l=n(260),u=n(261),d=n(257),j=n(157),m=(n(180),n(57)),b=n(30),p=n(249),O=n(8),x=n(11),h={user:null},f=function(e,t){switch(t.type){case"LOGIN":return Object(O.a)(Object(O.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(O.a)(Object(O.a)({},e),h);default:return e}},g=n(143),v=n(1),y={user:null};if(localStorage.getItem("token")){var k=Object(g.a)(localStorage.getItem("token"));1e3*k.exp<Date.now()?localStorage.removeItem("token"):y.user=k}var w,C,S,I,N,L,F,$=Object(r.createContext)({user:null}),U=function(e){var t=Object(r.useReducer)(f,y),n=Object(x.a)(t,2),a=n[0],c=n[1];return Object(v.jsx)($.Provider,Object(O.a)({value:{user:a.user,login:function(e){localStorage.setItem("token",e.authToken),c({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("token"),c({type:"LOGOUT"})}}},e))},B=n(21),D=n(29),T=n(267),A=n(232),W=n(229),M=n(155),P=Object(W.a)((function(e){return{root:{maxWidth:1200,position:"relative",margin:"7% 15% 5% 15%"},title:{padding:"3% 0% 0% 3%"},username:{display:"inline-block",padding:"0% 3%",marginBottom:"2%"},makeComment:{maxWidth:1200,position:"relative",margin:"5% 15% 5% 15%"},comment:{maxWidth:1200,position:"relative",margin:"3% 15% 3% 15%"},inputField:{margin:"2.5% 2.5% 1.5% 2.5%"},date:{display:"inline-block",paddingLeft:"10"},media:{paddingTop:"100%",marginBottom:"5%"},content:{paddingLeft:"3%"},like:{paddingLeft:"1%"},commentUsername:{display:"inline-block",padding:"2% 3%"},commentContent:{padding:"0% 0% 1% 3%"},optionButtonOverlay:{position:"absolute",top:"1%",right:"5px"},deleteButtonOverlay:{position:"absolute",top:"58%",right:"3px"}}})),q=Object(M.a)({overrides:{MuiCardActions:{root:{padding:"1.5px"}},MuiCardContent:{root:{padding:"0","&:last-child":{paddingBottom:0}}},MuiIconButton:{root:{fontSize:"0"}},MuiFormControl:{marginNormal:{marginTop:0,marginBottom:"8px"}},MuiTypography:{h6:{fontFamily:"Arial, sans-serif",fontSize:"1.3rem",color:"#4791db"},h5:{fontFamily:"Arial, sans-serif",color:"#f44336",fontSize:"3rem",textAlign:"center"}}},palette:{primary:{main:"#4791db"},secondary:{main:"#f44336"}}}),E=n(243),z=n(27),R=n(28),G=Object(R.a)(w||(w=Object(z.a)(["\n  query getPost($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      imageUrl\n      title\n      content\n      dateCreated\n      username\n      postLikes {\n        id\n        username\n        dateCreated\n      }\n      postLikeCount\n      comments {\n        id\n        content\n        dateCreated\n        username\n        commentLikes {\n          id\n          username\n          dateCreated\n        }\n        commentLikeCount\n      }\n    }\n  }\n"]))),H=Object(R.a)(C||(C=Object(z.a)(["\n  mutation createComment($postId: String!, $content: String!) {\n    createComment(postId: $postId, content: $content) {\n      id\n      comments {\n        id\n        content\n        dateCreated\n        username\n        commentLikes {\n          id\n          username\n          dateCreated\n        }\n        commentLikeCount\n      }\n      commentCount\n    }\n  }\n"]))),_=n(93),V=n.n(_),Y=n(233),Q=n(265),J=n(237),Z=n(94),K=n.n(Z),X=Object(R.a)(S||(S=Object(z.a)(["\n  mutation likePost($postId: ID!) {\n    likePost(postId: $postId) {\n      id\n      postLikes {\n        id\n        username\n        dateCreated\n      }\n      postLikeCount\n    }\n  }\n"]))),ee=function(e){var t=e.user,n=e.post,a=n.id,c=n.postLikes,o=Object(r.useState)(!1),i=Object(x.a)(o,2),s=i[0],l=i[1];Object(r.useEffect)((function(){l(!!t&&c.some((function(e){return e.username===t.username})))}),[t,c]);var u=Object(A.a)(X,{variables:{postId:a}}),d=Object(x.a)(u,1)[0],j=Object(v.jsx)(Y.a,{"aria-label":"like",onClick:t?function(){d(),l(!s)}:void 0,disabled:!t,children:Object(v.jsx)(Q.a,{title:s?"Unlike":"Like",placement:"top",children:Object(v.jsx)(K.a,{color:s?"secondary":"disabled"})})});return Object(v.jsx)(J.a,{children:j})},te=Object(R.b)(I||(I=Object(z.a)(["\n  mutation likeComment($postId: ID!, $commentId: ID!) {\n    likeComment(postId: $postId, commentId: $commentId) {\n      id\n      comments {\n        id\n        commentLikes {\n          id\n          username\n        }\n        commentLikeCount\n      }\n    }\n  }\n"]))),ne=function(e){var t=e.user,n=e.postId,a=e.commentId,c=e.comment,o=Object(r.useState)(!1),i=Object(x.a)(o,2),s=i[0],l=i[1];Object(r.useEffect)((function(){var e=t&&c.commentLikes.some((function(e){return e.username===t.username}));l(e)}),[t,c.commentLikes]);var u=Object(A.a)(te,{variables:{postId:n,commentId:a}}),d=Object(x.a)(u,1)[0],j=t?Object(v.jsx)(Y.a,{"aria-label":"like",color:s?"secondary":"default",onClick:function(){d(),l(!s)},children:Object(v.jsx)(K.a,{})}):Object(v.jsx)(Y.a,{"aria-label":"like",href:"/login",children:Object(v.jsx)(K.a,{color:"disabled"})});return Object(v.jsx)(J.a,{children:j})},ae=n(262),re=n(158),ce=n(266),oe=n(264),ie=n(238),se=n(239),le=n(240),ue=n(147),de=n.n(ue),je=Object(R.a)(N||(N=Object(z.a)(["\n  mutation deletePost($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n"]))),me=Object(W.a)((function(e){return{optionButton:{display:"block",marginTop:e.spacing(3)},formControl:{margin:e.spacing(2),minWidth:120},deleteButtonOverlay:{position:"absolute",top:"60%",right:"4px"}}})),be=me,pe=function(e){var t=e.user,n=e.post,a=n.id,c=(n.username,Object(r.useState)(null)),o=Object(x.a)(c,2),i=o[0],s=o[1],l=Object(r.useState)(!1),u=Object(x.a)(l,2),d=u[0],j=u[1],m=Object(r.useState)(""),b=Object(x.a)(m,2),p=b[0],O=b[1],h=be(),f=Object(A.a)(je),g=Object(x.a)(f,1)[0],y=function(){j(!1)},k=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({variables:{postId:a}});case 3:window.location.assign("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O(e.t0.graphQLErrors[0].message);case 9:y();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:t&&Object(v.jsxs)("div",{children:[Object(v.jsx)(de.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)}}),Object(v.jsxs)(re.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){s(null)},children:[Object(v.jsx)(ce.a,{onClick:function(){j(!0)},children:"Delete post"}),p&&Object(v.jsx)(ae.a,{severity:"error",className:h.error,children:p})]}),Object(v.jsxs)(oe.a,{open:d,onClose:y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(v.jsx)(ie.a,{id:"alert-dialog-title",children:"Are you sure you want to delete this post?"}),Object(v.jsxs)(se.a,{children:[Object(v.jsx)(le.a,{onClick:y,color:"primary",children:"No"}),Object(v.jsx)(le.a,{onClick:k,color:"primary",autoFocus:!0,children:"Yes"})]})]})]})})},Oe=Object(R.a)(L||(L=Object(z.a)(["\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\n    deleteComment(postId: $postId, commentId: $commentId) {\n      id        \n      comments { \n        id\n        username\n      }\n    }\n  }\n"]))),xe=n(148),he=n.n(xe),fe=n(241),ge=function(e){var t=e.open,n=e.onClose,a=e.onConfirm;return Object(v.jsxs)(oe.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(v.jsx)(ie.a,{id:"alert-dialog-title",children:"Are you sure you want to delete this comment?"}),Object(v.jsxs)(se.a,{children:[Object(v.jsx)(le.a,{onClick:n,color:"primary",children:"No"}),Object(v.jsx)(le.a,{onClick:a,color:"primary",autoFocus:!0,children:"Yes"})]})]})},ve=function(e){var t=e.postId,n=e.commentId,a=e.onComplete,c=Object(A.a)(Oe),o=Object(x.a)(c,2),i=o[0],s=o[1],l=s.loading,u=s.error,d=Object(r.useState)(!1),j=Object(x.a)(d,2),m=j[0],b=j[1],p=function(){b(!1)},O=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({variables:{postId:t,commentId:n}});case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:p();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(he.a,{variant:"outlined",onClick:function(){b(!0)}}),Object(v.jsx)(ge,{open:m,onClose:p,onConfirm:O}),l&&Object(v.jsx)(fe.a,{}),u&&Object(v.jsx)("div",{children:u.message})]})},ye=n(244),ke=n(245),we=n(164),Ce=n(246),Se=n(259),Ie=function(e){var t,n=P(),a=e.match.params.postId,c=Object(r.useContext)($).user,o=Object(T.a)(G,{variables:{postId:a}}),i=o.loading,s=o.data,l=(void 0===s?{}:s).getPost,u=Object(r.useState)(""),d=Object(x.a)(u,2),j=d[0],m=d[1],b=Object(A.a)(H),p=Object(x.a)(b,1)[0],O=function(){var e=Object(D.a)(Object(B.a)().mark((function e(t){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({variables:{postId:a,content:j}});case 3:m(""),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();if(i)t=Object(v.jsx)(fe.a,{});else{var h=l.id,f=l.content,g=l.title,y=l.dateCreated,k=l.username,w=l.imageUrl,C=l.postLikes,S=l.postLikeCount,I=l.comments;t=Object(v.jsx)("div",{children:Object(v.jsxs)(E.a,{theme:q,children:[Object(v.jsx)(ye.a,{className:n.root,children:Object(v.jsxs)(ke.a,{children:[Object(v.jsx)(we.a,{gutterBottom:!0,variant:"h5",component:"h2",className:n.title,children:g}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",component:"h2",className:n.username,children:k}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",component:"h2",className:n.date,children:V()(y).fromNow()}),Object(v.jsx)(Ce.a,{className:n.media,image:w||"https://images.unsplash.com/photo-1601850494422-3cf14624b0b3?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"}),Object(v.jsx)(we.a,{variant:"h6",component:"h2",className:n.content,children:f}),Object(v.jsxs)(J.a,{className:n.like,children:[Object(v.jsx)(ee,{user:c,post:{id:h,postLikes:C,postLikeCount:S}}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",children:S}),Object(v.jsx)(Y.a,{"aria-label":"settings",className:n.optionButtonOverlay,children:Object(v.jsx)(pe,{user:c,post:{id:h,username:k}})})]})]})}),c&&Object(v.jsx)(ye.a,{className:n.makeComment,children:Object(v.jsxs)(ke.a,{className:n.inputField,children:[Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",label:"Post a comment",name:"comment",size:"small",required:!0,fullWidth:!0,onChange:function(e){return m(e.target.value)},value:j}),Object(v.jsx)(le.a,{type:"submit",variant:"contained",color:"primary",disabled:""===j.trim(),onClick:O,children:"Submit"})]})}),I.map((function(e){return Object(v.jsx)(ye.a,{className:n.comment,children:Object(v.jsxs)(ke.a,{children:[Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",component:"h2",className:n.commentUsername,children:e.username}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",component:"h2",className:n.date,children:V()(e.dateCreated).fromNow()}),Object(v.jsx)(we.a,{variant:"h6",component:"h2",className:n.commentContent,children:e.content}),Object(v.jsxs)(J.a,{className:n.like,children:[Object(v.jsx)(ne,{user:c,postId:h,commentId:e.id,comment:e}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",children:e.commentLikeCount}),Object(v.jsx)(Y.a,{"aria-label":"settings",className:n.deleteButtonOverlay,children:c&&c.username===e.username&&Object(v.jsx)(ve,{postId:h,commentId:e.id})})]})]})},e.id)}))]})})}return t},Ne=Object(R.a)(F||(F=Object(z.a)(["\n  {\n    getPosts {\n      id\n      imageUrl\n      title\n      content\n      dateCreated\n      username\n      postLikes {\n        id\n        username\n        dateCreated\n      }\n      postLikeCount\n      commentCount\n      comments {\n        id\n        content\n        dateCreated\n        username\n        commentLikes {\n          id\n          username\n          dateCreated\n        }\n        commentLikeCount\n      }\n    }\n  }\n"]))),Le=Object(W.a)((function(e){return{container:{borderRadius:15,display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 50px",backgroundColor:"#E6F2F8",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.25)"},title:{padding:"5% 10%",color:"#3B5998",fontSize:"3rem",fontFamily:"Brush Script MT, cursive",textShadow:"1px 1px #8b9dc3"}}})),Fe=Object(M.a)({overrides:{MuiTypography:{h3:{fontFamily:"Nunito, sans-serif",fontWeight:"bold",color:"#3B5998",textShadow:"1px 1px #8b9dc3"},h5:{fontFamily:"Roboto, sans-serif",fontWeight:"bold",color:"#3B5998",textShadow:"1px 1px #8b9dc3"}}},palette:{primary:{main:"#3B5998"},secondary:{main:"#8b9dc3"}}}),$e=n(15),Ue=Object(W.a)((function(e){return{root:{maxWidth:345,margin:"auto",transition:"0.3s",boxShadow:"0 8px 40px -12px rgba(0,0,0,0.3)","&:hover":{boxShadow:"0 16px 70px -12.125px rgba(0,0,0,0.3)"},position:"relative"},media:{paddingTop:"80%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},username:{display:"inline-block",paddingRight:"5%"},date:{display:"inline-block",paddingLeft:"5%"},comment:{marginTop:"1%",marginLeft:"6%"},overlay:{position:"absolute",top:"67.5%",left:"85.5%"},overrides:{MuiCardActions:{padding:"0px"}}}})),Be=Object(M.a)({overrides:{MuiCardActions:{root:{padding:"1px"}},MuiCardContent:{root:{padding:"8px 16px"}},MuiIconButton:{root:{fontSize:"0"}},MuiTypography:{h6:{fontFamily:"Raleway, sans-serif"}}},palette:{primary:{main:"#4791db"},secondary:{main:"#F26B8A"}}}),De=n(125),Te=n.n(De),Ae=function(e){var t=e.user,n=e.post.comments,a=Object(r.useState)(!1),c=Object(x.a)(a,2),o=c[0],i=c[1];Object(r.useEffect)((function(){var e=t&&n.some((function(e){return e.username===t.username}));i(e)}),[t,n]);var s=o?Object(v.jsx)(Te.a,{color:"primary"}):Object(v.jsx)(Te.a,{color:"disabled"});return Object(v.jsx)(J.a,{children:s})},We=n(7),Me=n(149),Pe=n.n(Me),qe=n(126),Ee=function(e){var t=e.currency,n=e.amount,a=Object(r.useRef)(n);return Object(r.useEffect)((function(){a.current=n}),[n]),Object(v.jsx)(qe.a,{style:{color:"black",label:"donate"},fundingSource:"paypal",createOrder:function(e,n){return n.order.create({purchase_units:[{amount:{value:a.current,breakdown:{item_total:{currency_code:t,value:a.current}}},items:[{name:"Anime Fundraiser",description:"All proceeds directly support anime content creator.",quantity:"1",unit_amount:{currency_code:t,value:a.current},category:"DONATION"}]}]})}})};function ze(){var e=Object(r.useState)("5.00"),t=Object(x.a)(e,1)[0];return Object(v.jsx)("form",{className:"DonateForm",children:Object(v.jsx)(Ee,{currency:"USD",amount:t})})}function Re(){return Object(v.jsxs)(qe.b,{options:{"client-id":"test",components:"buttons",currency:"USD"},children:[Object(v.jsx)("figure",{children:Object(v.jsx)("figcaption",{})}),Object(v.jsx)(ze,{})]})}var Ge,He,_e,Ve,Ye,Qe=n(247),Je=function(e){var t=e.post,n=t.id,a=t.imageUrl,o=t.title,i=t.content,s=t.dateCreated,l=t.username,u=t.postLikes,d=t.postLikeCount,j=t.commentCount,m=t.comments,b=Object(r.useContext)($).user,p=c.a.useState(!1),O=Object(x.a)(p,2),h=O[0],f=O[1],g=Ue();return Object(v.jsx)(E.a,{theme:Be,children:Object(v.jsxs)(ye.a,{className:g.root,children:[Object(v.jsx)(Ce.a,{className:g.media,image:a||"https://images.unsplash.com/photo-1601850494422-3cf14624b0b3?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"}),Object(v.jsxs)(ke.a,{children:[Object(v.jsx)(we.a,{gutterBottom:!0,variant:"h6",className:g.title,children:o.length>20?o.substring(0,20)+" ...":o}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",className:g.username,children:l}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",className:g.date,children:V()(s).fromNow()}),Object(v.jsx)(Y.a,{"aria-label":"settings",className:g.overlay,children:Object(v.jsx)(pe,{user:b,post:{id:n,username:l}})})]}),Object(v.jsxs)(J.a,{disableSpacing:!0,children:[Object(v.jsx)(ee,{user:b,post:{id:n,postLikes:u,postLikeCount:d}}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",children:d}),Object(v.jsx)(Y.a,{href:"/posts/".concat(n),className:g.comment,children:Object(v.jsx)(Ae,{user:b,post:{comments:m}})}),Object(v.jsx)(we.a,{variant:"body2",color:"textSecondary",children:j}),Object(v.jsx)(Re,{}),Object(v.jsx)(Y.a,{className:Object(We.a)(g.expand,Object($e.a)({},g.expandOpen,h)),onClick:function(){f(!h)},"aria-expanded":h,"aria-label":"show more",children:Object(v.jsx)(Pe.a,{})})]}),Object(v.jsx)(Qe.a,{in:h,timeout:"auto",unmountOnExit:!0,children:Object(v.jsx)(ke.a,{children:Object(v.jsx)(we.a,{variant:"h6",className:g.content,children:i})})})]})})},Ze=n(248),Ke=function(){var e=Object(T.a)(Ne),t=e.loading,n=e.data,a=(void 0===n?{}:n).getPosts,r=Le();return t?Object(v.jsx)(fe.a,{}):a&&Object(v.jsx)(E.a,{theme:Fe,children:Object(v.jsxs)(Ze.a,{children:[Object(v.jsxs)(p.a,{component:"main",className:r.title,children:[Object(v.jsx)(we.a,{component:"h1",variant:"h3",align:"center",children:"Anime Home"}),Object(v.jsx)(we.a,{component:"h1",variant:"h5",align:"center",children:"Welcome to our collection of anime posts! Whether you're a long-time fan of the medium or just getting started, we're confident you'll find something here to pique your interest. So sit back, relax, and dive into the wonderful world of anime!"})]}),Object(v.jsx)(Ze.a,{className:r.container,container:!0,alignItems:"stretch",spacing:3,children:a.map((function(e){return Object(v.jsx)(Ze.a,{item:!0,xs:12,sm:6,md:4,children:Object(v.jsx)(Je,{post:e})},e.id)}))})]})})},Xe=Object(W.a)((function(e){return{root:{flexGrow:1},title:{textDecoration:"none",color:"white",flexGrow:1},button:{}}})),et=Object(M.a)({palette:{primary:{main:"#e91e63",light:"#ff6090",dark:"#b0003a",contrastText:"#fff"}},overrides:{MuiAppBar:{colorPrimary:{background:"linear-gradient(45deg, #e91e63 0%, #9c27b0 50%, #673ab7 100%)"}}}}),tt=n(250),nt=n(251),at=function(){var e=Xe(),t=Object(r.useContext)($);return t.user?Object(v.jsx)(E.a,{theme:et,children:Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)(tt.a,{position:"static",children:Object(v.jsxs)(nt.a,{children:[Object(v.jsx)(we.a,{component:m.b,to:"/",variant:"h6",className:e.title,children:t.user.username}),Object(v.jsx)(le.a,{color:"inherit",component:m.b,to:"/chat",children:"Chat"}),Object(v.jsx)(le.a,{color:"inherit",component:m.b,to:"/post",children:"Post"}),Object(v.jsx)(le.a,{color:"inherit",onClick:t.logout,children:"Logout"}),Object(v.jsx)(Re,{})]})})})}):Object(v.jsx)(E.a,{theme:et,children:Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)(tt.a,{position:"static",children:Object(v.jsxs)(nt.a,{children:[Object(v.jsx)(we.a,{component:m.b,to:"/",variant:"h6",className:e.title,children:"Home"}),Object(v.jsx)(le.a,{color:"inherit",component:m.b,to:"/login",children:"Login"}),Object(v.jsx)(le.a,{color:"inherit",component:m.b,to:"/register",children:"Register User"}),Object(v.jsx)(Re,{component:m.b,to:"/donate"})]})})})})},rt=Object(W.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#F5F5F5",borderRadius:"15px",padding:"50px"},form:{width:"100%",marginTop:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2),backgroundColor:"#f44336",color:"#FFFFFF",borderRadius:"20px",padding:"10px 50px",fontSize:"1.5rem",fontFamily:"Arial, sans-serif",textTransform:"uppercase",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},error:{marginTop:"2%",fontFamily:"Arial, sans-serif",color:"#f44336",fontSize:"1.2rem"}}})),ct=rt,ot=Object(W.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1528360983277-13d401cdc186?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80)",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#F26B8A"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},error:{margin:"1% 0% 3% 0%"}}})),it=Object(M.a)({palette:{primary:{main:"#4791db"},secondary:{main:"#F26B8A"}},overrides:{MuiTypography:{h5:{fontFamily:"Cinzel Decorative, sans-serif",color:"#F26B8A"}}}}),st=Object(R.a)(Ge||(Ge=Object(z.a)(["\n  mutation createPost($title: String!, $content: String!, $imageUrl: String) {\n    createPost(title: $title, content: $content, imageUrl: $imageUrl) {\n      imageUrl\n      title\n      content\n    }\n  }\n"]))),lt=n(252),ut=function(){var e=ct(),t=Object(r.useState)({title:"",content:"",imageUrl:""}),n=Object(x.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),i=Object(x.a)(o,2),s=i[0],l=i[1],u=a.title,d=a.content,j=a.imageUrl,m=function(e){var t=e.target,n=t.name,r=t.value;c(Object(O.a)(Object(O.a)({},a),{},Object($e.a)({},n,r)))},b=Object(A.a)(st),h=Object(x.a)(b,1)[0],f=function(){var e=Object(D.a)(Object(B.a)().mark((function e(t){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u&&d){e.next=4;break}return l("Title and content are required"),e.abrupt("return");case 4:return l(""),e.prev=5,e.next=8,h({variables:Object(O.a)({},a)});case 8:window.location.assign("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),l(e.t0.graphQLErrors[0].message);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(E.a,{theme:it,children:Object(v.jsxs)(p.a,{component:"main",maxWidth:"sm",children:[Object(v.jsx)(lt.a,{}),Object(v.jsxs)("div",{className:e.paper,children:[Object(v.jsx)(we.a,{component:"h1",variant:"h5",children:"Sharing a future adventure"}),Object(v.jsxs)("form",{noValidate:!0,className:e.form,onSubmit:f,children:[Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",label:"title",name:"title",autoFocus:!0,required:!0,fullWidth:!0,onChange:m,value:u}),Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",label:"content",name:"content",required:!0,fullWidth:!0,multiline:!0,onChange:m,value:d}),Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",name:"imageUrl",label:"imageUrl",size:"small",required:!0,fullWidth:!0,onChange:m,value:j}),Object(v.jsx)(le.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"submit"}),s&&Object(v.jsx)(ae.a,{severity:"error",className:e.error,children:s})]})]})]})})},dt=Object(R.a)(He||(He=Object(z.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      dateCreated\n      authToken\n    }\n  }\n"]))),jt=n(163),mt=n(253),bt=function(){var e=Object(r.useContext)($),t=ot(),n=Object(r.useState)(""),a=Object(x.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)({username:"",password:""}),s=Object(x.a)(i,2),l=s[0],u=s[1],d=l.username,j=l.password,m=Object(A.a)(dt),b=Object(x.a)(m,1)[0],p=function(e){var t=e.target,n=t.name,a=t.value;u(Object(O.a)(Object(O.a)({},l),{},Object($e.a)({},n,a)))},h=function(){var t=Object(D.a)(Object(B.a)().mark((function t(n){var a,r;return Object(B.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),d&&j){t.next=4;break}return o("All fields are required"),t.abrupt("return");case 4:return o(""),t.prev=5,t.next=8,b({variables:Object(O.a)({},l)});case 8:a=t.sent,r=a.data.login,e.login(r),window.location.assign("/"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),o(t.t0.graphQLErrors[0].message);case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)(E.a,{theme:it,children:Object(v.jsxs)(Ze.a,{container:!0,component:"main",className:t.root,children:[Object(v.jsx)(lt.a,{}),Object(v.jsx)(Ze.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(v.jsx)(Ze.a,{item:!0,xs:12,sm:8,md:5,component:jt.a,elevation:6,square:!0,children:Object(v.jsxs)("div",{className:t.paper,children:[Object(v.jsx)(we.a,{component:"h1",variant:"h5",children:"Login"}),Object(v.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:h,children:[Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",label:"Username",name:"username",required:!0,fullWidth:!0,autoFocus:!0,onChange:p,value:d}),Object(v.jsx)(Se.a,{variant:"outlined",margin:"normal",name:"password",label:"Password",type:"password",required:!0,fullWidth:!0,onChange:p,value:j}),Object(v.jsx)(le.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"}),c&&Object(v.jsx)(ae.a,{severity:"error",className:t.error,children:c}),Object(v.jsx)(Ze.a,{container:!0,children:Object(v.jsx)(Ze.a,{item:!0,children:Object(v.jsx)(mt.a,{href:"/Register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})})]})})},pt=Object(R.a)(_e||(_e=Object(z.a)(["\n  mutation createUser($username: String!, $email: String!, $password: String!) {\n    createUser(username: $username, email: $email, password: $password) {\n      id\n      email\n      username\n      dateCreated\n      authToken\n    }\n  }\n"]))),Ot=Object(W.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},error:{marginTop:e.spacing(2)}}})),xt=function(){var e=Ot(),t=Object(r.useState)(""),n=Object(x.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)({username:"",email:"",password:""}),i=Object(x.a)(o,2),s=i[0],l=i[1],u=s.username,d=s.email,j=s.password,m=Object(r.useContext)($),b=Object(A.a)(pt,{onError:function(e){c(e.graphQLErrors[0].message)}}),h=Object(x.a)(b,2),f=h[0],g=h[1].loading,y=function(e){var t=e.target,n=t.name,a=t.value;l(Object(O.a)(Object(O.a)({},s),{},Object($e.a)({},n,a)))},k=function(){if(!d||!u||!j)return"All fields are required";if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(d).toLowerCase()))return"Enter a valid email address.";return/^(?!.*\.\.)(?!.*\.$)[^\W][\w.]{0,29}$/.test(u)?u.length>20?"Username no more than 20 characters":j.length<6?"Password min 6 characters":"":"Usernames can only use letters, numbers, underscores and periods"},w=function(){var e=Object(D.a)(Object(B.a)().mark((function e(t){var n,a,r,o;return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=k())){e.next=5;break}return c(n),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,f({variables:Object(O.a)({},s)});case 8:a=e.sent,r=a.data,o=r.createUser,m.login(o),window.location.assign("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),c(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(E.a,{theme:it,children:Object(v.jsxs)(p.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(lt.a,{}),Object(v.jsxs)("div",{className:e.paper,children:[Object(v.jsx)(we.a,{component:"h1",variant:"h5",children:"Register"}),a&&Object(v.jsx)(ae.a,{className:e.error,severity:"error",children:a}),Object(v.jsxs)("form",{className:e.form,onSubmit:w,children:[Object(v.jsxs)(Ze.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ze.a,{item:!0,xs:12,children:Object(v.jsx)(Se.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:u,onChange:y,autoComplete:"username"})}),Object(v.jsx)(Ze.a,{item:!0,xs:12,children:Object(v.jsx)(Se.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:d,onChange:y,autoComplete:"email"})}),Object(v.jsx)(Ze.a,{item:!0,xs:12,children:Object(v.jsx)(Se.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:j,onChange:y,autoComplete:"current-password"})})]}),Object(v.jsx)(le.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:g,children:g?"Loading...":"Register"}),Object(v.jsx)(Ze.a,{container:!0,children:Object(v.jsx)(Ze.a,{item:!0,children:Object(v.jsx)(mt.a,{href:"/signin",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})})},ht=n(150),ft=n(151),gt=n(112),vt=n(96),yt=n(83),kt=n(160),wt=Object(R.a)(Ve||(Ve=Object(z.a)(["\n  mutation postMessage($content:String!){\n    postMessage(content: $content) {\n      content\n    }\n  }\n"]))),Ct=Object(R.b)(Ye||(Ye=Object(z.a)(["\n   query {\n    messages {\n      user\n      username\n      content\n      \n    }\n  }\n"]))),St=function(e){var t=e.user,n=Object(T.a)(Ct,{}).data;return n?Object(v.jsx)(v.Fragment,{children:n.messages.map((function(e,n){var a=e.user,r=e.content,c=e.username;return Object(v.jsxs)("div",{style:{display:"flex",justifyContent:t===a?"flex-end":"flex-start",paddingBottom:"1em"},children:[t!==a&&Object(v.jsx)("div",{style:{height:50,width:50,marginRight:"0.5em",border:"2px solid #e5e6ea",borderRadius:25,textAlign:"center",fontSize:"18pt",paddingTop:5},children:c.slice(0,2).toUpperCase()}),Object(v.jsx)("div",{style:{background:t===a?"blue":"#e5e6ea",color:t===a?"white":"black",padding:"1em",borderRadius:"1em",maxWidth:"60%"},children:r})]},"message-".concat(n))}))}):null},It=function(){var e=c.a.useState({content:""}),t=Object(x.a)(e,2),n=t[0],a=t[1],r=Object(A.a)(wt),o=Object(x.a)(r,1)[0],i=function(){n.content&&o({variables:{content:n.content}})};return Object(v.jsx)(ht.a,{children:Object(v.jsx)(ft.a,{children:Object(v.jsx)(gt.a,{md:{offset:4},children:Object(v.jsxs)(yt.a,{border:"warning",children:[Object(v.jsx)(yt.a.Header,{children:"Live Chat"}),Object(v.jsxs)(yt.a.Body,{children:[Object(v.jsx)(yt.a.Title,{children:" "}),Object(v.jsxs)(yt.a.Text,{children:["messages:",Object(v.jsx)(St,{user:"",value:n}),Object(v.jsx)(vt.a,{children:Object(v.jsxs)(vt.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(v.jsx)(vt.a.Label,{children:"  "}),Object(v.jsx)(vt.a.Control,{as:"textarea",rows:3,value:n.content,onChange:function(e){return a(Object(O.a)(Object(O.a)({},n),{},{content:e.target.value}))},onKeyUp:function(e){13===e.keyCode&&i()}})]})})]}),Object(v.jsx)(kt.a,{variant:"primary",onClick:function(){return i()},children:"Send"})]})]})})})})},Nt=n(258),Lt=function(){var e=Object(r.useState)(null),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),o=Object(x.a)(c,2),i=o[0],s=o[1],l=Object(r.useState)(!1),u=Object(x.a)(l,2),d=u[0],j=u[1],m=Object(r.useState)(null),p=Object(x.a)(m,2),O=p[0],h=p[1],f=Object(r.useState)(null),g=Object(x.a)(f,2),y=g[0],k=g[1],w=Object(b.e)().userId;Object(r.useEffect)((function(){var e=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){var t;return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.get("/api/users/".concat(w));case 3:t=e.sent,a(t.data),s(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),k("Error fetching user data");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[w]);var C=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.post("/api/users/".concat(w,"/follow"));case 3:j(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),k("Error following user");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.post("/api/users/".concat(w,"/unfollow"));case 3:j(!1),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),k("Error unfollowing user");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){var t,n;return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("profileImage",O),e.next=5,Nt.a.post("/api/users/".concat(w,"/profile-image"),t);case 5:return e.next=7,Nt.a.get("/api/users/".concat(w));case 7:n=e.sent,a(n.data),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),k("Error uploading profile picture");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return i?Object(v.jsx)("p",{children:"Loading..."}):n?Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{children:[n.name,"'s Profile"]}),Object(v.jsx)("img",{src:n.profileImageUrl,alt:"".concat(n.name,"'s profile picture")}),Object(v.jsx)("input",{type:"file",onChange:function(e){h(e.target.files[0])}}),Object(v.jsx)("button",{onClick:I,children:"Upload Profile Picture"}),y&&Object(v.jsx)("p",{children:y}),Object(v.jsx)("p",{children:n.bio}),d?Object(v.jsx)("button",{onClick:S,children:"Unfollow"}):Object(v.jsx)("button",{onClick:C,children:"Follow"})]}):Object(v.jsx)("p",{children:"User not found"})},Ft=function(e){var t=e.userId,n=e.followStatus,a=e.updateFollowStatus,c=Object(r.useState)(n),o=Object(x.a)(c,2),i=o[0],s=o[1],l=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.post("/api/users/".concat(t,"/follow"));case 3:200===e.sent.status&&(s(!0),a(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.delete("/api/users/".concat(t,"/follow"));case 3:200===e.sent.status&&(s(!1),a(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("button",{className:"btn btn-primary",onClick:i?u:l,children:i?"Unfollow":"Follow"})},$t=function(e){var t=e.user,n=e.userId;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:t.name}),Object(v.jsxs)("p",{children:["Email: ",t.email]}),Object(v.jsxs)("p",{children:["Age: ",t.age]}),n&&Object(v.jsxs)("p",{children:["User ID: ",n]})]})},Ut=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),o=Object(x.a)(c,2),i=o[0],s=o[1];Object(r.useEffect)((function(){var e=function(){var e=Object(D.a)(Object(B.a)().mark((function e(){var t;return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt.a.get("/api/users/search?q=".concat(n));case 3:t=e.sent,s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"User Search"}),Object(v.jsx)("input",{type:"text",value:n,onChange:function(e){a(e.target.value)}}),i.map((function(e){return Object(v.jsx)($t,{user:e},e._id)}))]})},Bt=(n(196),function(){return Object(v.jsx)(U,{children:Object(v.jsx)(m.a,{children:Object(v.jsxs)(p.a,{children:[Object(v.jsx)(at,{}),Object(v.jsx)(b.a,{exact:!0,path:"/",component:Ke}),Object(v.jsx)(b.a,{exact:!0,path:"/login",component:bt}),Object(v.jsx)(b.a,{exact:!0,path:"/register",component:xt}),Object(v.jsx)(b.a,{exact:!0,path:"/post",component:ut}),Object(v.jsx)(b.a,{exact:!0,path:"/posts/:postId",component:Ie}),Object(v.jsx)(b.a,{exact:!0,path:"/chat",component:It}),Object(v.jsx)(b.a,{exact:!0,path:"/profile",component:Lt}),Object(v.jsx)(b.a,{exact:!0,path:"/userSearch",component:Ut}),Object(v.jsx)(b.a,{exact:!0,path:"/follow",component:Ft})]})})})}),Dt=Object(s.a)({uri:"http://localhost:3001/graphql"}),Tt=Object(j.a)((function(){var e=localStorage.getItem("token");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),At=new l.a({link:Tt.concat(Dt),cache:new u.a});i.a.render(Object(v.jsx)(d.a,{client:At,children:Object(v.jsx)(Bt,{})}),document.getElementById("root")),a()}},[[198,1,2]]]);
//# sourceMappingURL=main.2a61cc3d.chunk.js.map